/**
 * Comments Stylesheet
 *
 * A lot of the comments markup is generated automatically by WordPress, making
 * it awkward to namespace. There is some heavy nesting here to migigate this.
 *
 * @package     danfoy_2019
 * @subpackage  comments
 * @author      Dan Foy <danfoy.com>
 * @since       1.0.0
 */


// Wrapper
.responses { // <aside>
    margin-top: $line * 2;          // Breathing space from .post-meta
    font-family: $sans-serif;
}


/**
 * Pingbacks
 *
 * Pingbacks are separated from comments.
 *
 */
.responses-pings-list { // <ol>
    text-transform: uppercase;      // Differentiate from link
    font-size: $text-s;             // Differentiate from link
    margin-top: $line;              // Whitespace
    margin-bottom: $line;           // Whitespace

    .pingback { // <li>
        position: relative;
        margin: $line;
    }

    a {
        text-decoration: none;      // Remove underline
        text-transform: initial;    // Override uppercase transform above
    }

    .url { // <a>
        font-size: $text;           // Override font size above
        font-style: italic;         // Differentiate from other links
        display: block;             // Newline separate from label
        line-height: $text;         // Tighter spacing on wrapping links
    }

    .edit-link { // <span>
        position: absolute;
        bottom: 0;
        right: 0;
    }
}

// Serif fonts for content
.comment-content { // <div>
    font-family: $serif;
    line-height: $line;             // Match paragraph style
}

.responses-comments-list,           // <ol>
.responses-pings-list {             // <ol>
    margin: 0;                      // Override native list margin
    list-style-type: none;          // Override native list style

    > .comment:last-of-type {
        border-bottom: 1px solid;
    }
}

.comment { // <li>
    padding-top: $line;         // Breathing room for header
    border-top: 1px solid;      // To separate comments
    list-style-type: none;      // Override useragent styles
    overflow: hidden;           // Prevent commenters breaking the scaffolding

    p:last-of-type {
        margin-bottom: $text-s; // Tighten up to reply link
    }

    .comment-body { // <article>
        margin: 0 $line;
        padding-bottom: $text-s;
    }

    // Nested comments
    .children {
        padding-left: 0;

        .comment {
            padding-top: $text-s;
            margin-left: $text-s;  // 1 indent per level
            border-top: none;
            border-left: 1px solid;

            // Smaller child avatars
            .avatar {
                width: ($line * 2) !important;     // !Set inline by WP
                height: ($line * 2) !important;    // !Set inline by WP
            }
            // Match padding to new shrunken avatar
            .comment-meta {
                min-height: ($line * 2);
                padding-left: calc(48px + #{$text-s});
            }

            // Give replies breathing room when nested
            .reply {
                padding: $text-s 0;
            }
        }
    }

    // Trim top-level comments with children
    &.depth-1.parent {
        padding-bottom: $text-s;
    }

    // Remove padding on last paragraph of threadded comments
    // Bumps up the reply link
    &.parent p:last-of-type {
        margin-bottom: 0;
    }
}


.reply {
    text-align: right;      // Reply link looks more balanced opposite gravatar
    font-size: $text-s;     // Smaller text

    a {
        text-decoration: none;
    }

    small:after {
        content: "\2193";       // A down arrow
        padding-left: $text-s;  // Mimic a space
        font-weight: 700;
    }
}
