/**
 * Comments Stylesheet
 *
 * A lot of the comments markup is generated automatically by WordPress, making
 * it awkward to namespace. There is some heavy nesting here to migigate this.
 *
 * @package     danfoy_2019
 * @subpackage  comments
 * @author      Dan Foy <danfoy.com>
 * @since       1.0.0
 */


// Wrapper
.responses { // <aside>
    margin-top: 3em;            // Breathing space from .post-meta
    font-family: $sans-serif;
}


/**
 * Pingbacks
 *
 * Pingbacks are separated from comments.
 *
 */
.responses-pings-list { // <ol>
    text-transform: uppercase;      // Differentiate from link
    font-size: 0.65em;              // Differentiate from link
    margin-top: 1em;                // Whitespace
    margin-bottom: 1em;             // Whitespace

    .pingback { // <li>
        position: relative;
        padding-left: gutter(1);
        padding-bottom: gutter(1);
        padding-top: 1em;
        padding-bottom: 1em;
    }

    a {
        text-decoration: none;      // Remove underline
        text-transform: initial;    // Override uppercase transform above
    }

    .url { // <a>
        font-size: $em_base;        // Override font size above
        font-style: italic;         // Differentiate from other links
        display: block;             // Newline separate from label
        line-height: 1;             // Tighter spacing on wrapping links
    }

    .edit-link { // <span>
        position: absolute;
        bottom: 0;
        right: 0;
    }
}

// Serif fonts for content
.comment-content { // <div>
    font-family: $serif;
    line-height: 1.4;       // Match paragraph style
}

.responses-comments-list,   // <ol>
.responses-pings-list {     // <ol>
    padding-left: 0;        // Override native list padding
    margin-top: 0;          // Override native list margin
    margin-bottom: 0;       // Override native list margin
    list-style-type: none;  // Override native list style

    > .comment:last-of-type {
        border-bottom: 1px solid;
    }
}

.comment { // <li>
    padding-top: 1em;           // Breathing room for header
    border-top: 1px solid;      // To separate comments
    list-style-type: none;      // Override useragent styles
    overflow: hidden;           // Prevent commenters breaking the scaffolding

    p:last-of-type {
        margin-bottom: 0.5em;   // Tighten up to reply link
    }

    .comment-body { // <article>
        margin-left: gutter(1);
        margin-right: gutter(1);
        padding-bottom: 0.5em; // Line up with global padding
    }

    // Nested comments
    .children {
        padding-left: 0;

        .comment {
            padding-top: 0.5em;
            margin-left: gutter(1);     // 1 indent per level
            border-top: none;
            border-left: 1px solid;

            // Smaller child avatars
            .avatar {
                width: 4.2rem !important;   // Set inline by WP
                height: 4.2rem !important;  // Set inline by WP
            }
            // Match padding to new shrunken avatar
            .comment-meta {
                min-height: 4.2rem;
                padding-left: 5.2rem;

                // Smaller author title when nested
                .fn { // <b> author name
                    font-size: 0.8em;
                }
            }

            // Give replies breathing room when nested
            .reply {
                padding-top: 1em;
                padding-bottom: gutter(1);
            }
        }
    }

    // Trim top-level comments with children
    &.depth-1.parent {
        padding-bottom: 1em;
    }

    // Remove padding on last paragraph of threadded comments
    // Bumps up the reply link
    &.parent p:last-of-type {
        margin-bottom: 0;
    }
}


.reply {
    text-align: right;          // Reply link looks more balanced opposite gravatar
    font-size: 0.8em;           // Smaller text

    a {
        text-decoration: none;
    }

    small:after {
        content: "\2193";       // A down arrow
        padding-left: 0.5em;   // Mimic a space
        font-weight: 700;
    }
}
